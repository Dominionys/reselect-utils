(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDebugMode=exports.isDebugMode=exports.defaultKeySelector=exports.defineDynamicSelectorName=exports.isCachedSelector=exports.getSelectorName=void 0;exports.getSelectorName=function(selector){return"selectorName"in selector&&selector.selectorName?selector.selectorName:selector.name};exports.isCachedSelector=function(selector){return selector instanceof Object&&"keySelector"in selector};exports.defineDynamicSelectorName=function(selector,selectorNameGetter){var overriddenSelectorName;Object.defineProperty(selector,"selectorName",{configurable:!0,get:function(){return null!=overriddenSelectorName?overriddenSelectorName:selectorNameGetter()},set:function(value){overriddenSelectorName=value}})};exports.defaultKeySelector=function(){return"<DefaultKey>"};var debugMode=!0;exports.isDebugMode=function(){return debugMode};exports.setDebugMode=function(value){debugMode=value}},147:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectorGraph=void 0;var react_1=__importStar(__webpack_require__(44)),reselect_tools_1=__webpack_require__(710),cytoscapeUtils_1=__webpack_require__(711);exports.SelectorGraph=function(_a){var selectors=_a.selectors,onNodeClick=_a.onNodeClick,style=_a.style,_b=__read(react_1.useState({}),2),nodes=_b[0],setNodes=_b[1],_c=__read(react_1.useState([]),2),edges=_c[0],setEdges=_c[1],cy=react_1.useRef(),cyElement=react_1.useRef(null);return react_1.useEffect((function(){reselect_tools_1.reset(),reselect_tools_1.registerSelectors(selectors);var graph=reselect_tools_1.selectorGraph();setNodes(graph.nodes),setEdges(graph.edges)}),[selectors,setNodes,setEdges]),react_1.useEffect((function(){cy.current||(cy.current=cytoscapeUtils_1.drawCytoscapeGraph(cyElement.current)),cytoscapeUtils_1.updateCytoscapeGraph(cy.current,nodes,edges)}),[cy,cyElement,nodes,edges]),react_1.useEffect((function(){cy.current&&(cy.current.off("click","node"),cy.current.on("click","node",(function(event){var name=event.target.data().name;onNodeClick(name,reselect_tools_1.checkSelector(name))})))}),[cy,onNodeClick]),react_1.useEffect((function(){return function(){cy.current&&cy.current.destroy()}}),[cy]),react_1.default.createElement("div",{style:__assign({height:"100%"},style),ref:cyElement,title:"Double Click to Reset",onDoubleClick:function(){return cy.current&&cytoscapeUtils_1.updateCytoscapeGraph(cy.current,nodes,edges)}})}},364:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStructuredSelector=void 0;var reselect_1=__webpack_require__(87);exports.createStructuredSelector=function createStructuredSelector(selectors,selectorCreator){void 0===selectorCreator&&(selectorCreator=reselect_1.createSelector);var objectKeys=Object.keys(selectors);return selectorCreator(objectKeys.map((function(key){return selectors[key]})),(function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return values.reduce((function(composition,value,index){var _a;return __assign(__assign({},composition),((_a={})[objectKeys[index]]=value,_a))}),{})}))}},365:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBoundSelector=void 0;var helpers_1=__webpack_require__(111),innerCreateBoundSelector=function(baseSelector,binding){return function(state,props){return baseSelector(state,__assign(__assign({},props),binding))}};exports.createBoundSelector=function(baseSelector,binding,options){var _a;void 0===options&&(options={});var bindingStrategy=null!==(_a=options.bindingStrategy)&&void 0!==_a?_a:innerCreateBoundSelector,boundSelector=bindingStrategy(baseSelector,binding);if(Object.assign(boundSelector,baseSelector),boundSelector.dependencies=[baseSelector],helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(boundSelector,(function(){return helpers_1.getSelectorName(baseSelector)+" ("+function(binding){var structure=Object.keys(binding).reduce((function(result,key){var _a;return __assign(__assign({},result),((_a={})[key]="[*]",_a))}),{});return Object.keys(structure).join()+" -> "+Object.values(structure).join()}(binding)+")"})),helpers_1.isCachedSelector(baseSelector)){var cachedBoundSelector=boundSelector;baseSelector.getMatchingSelector&&(cachedBoundSelector.getMatchingSelector=bindingStrategy(baseSelector.getMatchingSelector,binding)),baseSelector.removeMatchingSelector&&(cachedBoundSelector.removeMatchingSelector=bindingStrategy(baseSelector.removeMatchingSelector,binding)),cachedBoundSelector.keySelector=bindingStrategy(baseSelector.keySelector,binding)}return boundSelector}},366:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPathSelector=exports.innerCreatePathSelector=void 0;var helpers_1=__webpack_require__(111),isObject=function(value){return null!==value&&"object"==typeof value};exports.innerCreatePathSelector=function(baseSelector,path,applyMeta){void 0===path&&(path=[]),void 0===applyMeta&&(applyMeta=function(){});return new Proxy((function(defaultValue){function resultSelector(){for(var result=baseSelector.apply(null,arguments),i=0;i<path.length&&isObject(result);i+=1)result=result[path[i]];return null!=result?result:defaultValue}return Object.assign(resultSelector,baseSelector,{path:path}),resultSelector.dependencies=[baseSelector],applyMeta(resultSelector),helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(resultSelector,(function(){var baseName=helpers_1.getSelectorName(baseSelector);return __spread([baseName],path).join(".")})),resultSelector}),{get:function(target,key){return exports.innerCreatePathSelector(baseSelector,__spread(path,[key]),applyMeta)}})},exports.createPathSelector=function createPathSelector(baseSelector){return exports.innerCreatePathSelector(baseSelector)}},367:function(module,exports,__webpack_require__){__webpack_require__(368),__webpack_require__(540),module.exports=__webpack_require__(541)},442:function(module,exports){},541:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(88);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(694)],module)}.call(this,__webpack_require__(542)(module))},694:function(module,exports,__webpack_require__){var map={"./reselect-utils/src/__stories__/createAdaptedSelector.story.tsx":695,"./reselect-utils/src/__stories__/createBoundSelector.story.tsx":830,"./reselect-utils/src/__stories__/createChainSelector.story.tsx":831,"./reselect-utils/src/__stories__/createPathSelector.story.tsx":840};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=694},695:function(module,exports,__webpack_require__){"use strict";(function(module){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(66).withSource,__STORY__=(__webpack_require__(66).addSource,"import React, { useMemo } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { SelectorGraph } from './SelectorGraph';\nimport { State } from '../__data__/state';\nimport { createAdaptedSelector } from '../createAdaptedSelector';\nimport { createStructuredSelector } from '../createStructuredSelector';\n\nstoriesOf('createAdaptedSelector', module).add('example', () => {\n  const selectors = useMemo(() => {\n    /* SELECTORS DEFINITION START */\n    const personSelector = (state: State, props: { id: number }) =>\n      state.persons[props.id];\n    const messageSelector = (state: State, props: { id: number }) =>\n      state.messages[props.id];\n\n    const personAndMessageSelector = createStructuredSelector({\n      person: createAdaptedSelector(\n        personSelector,\n        (props: { personId: number }) => ({\n          id: props.personId,\n        }),\n      ),\n      message: createAdaptedSelector(\n        messageSelector,\n        (props: { messageId: number }) => ({\n          id: props.messageId,\n        }),\n      ),\n    });\n    /* SELECTORS DEFINITION END */\n\n    return {\n      personSelector,\n      messageSelector,\n      personAndMessageSelector,\n    };\n  }, []);\n\n  return (\n    <SelectorGraph\n      selectors={selectors}\n      onNodeClick={(name, node) => action(name)(node)}\n    />\n  );\n});\n"),__ADDS_MAP__={"createadaptedselector--example":{startLoc:{col:47,line:9},endLoc:{col:1,line:46},startBody:{col:58,line:9},endBody:{col:1,line:46}}},react_1=__importStar(__webpack_require__(44)),react_2=__webpack_require__(88),addon_actions_1=__webpack_require__(110),SelectorGraph_1=__webpack_require__(147),createAdaptedSelector_1=__webpack_require__(829),createStructuredSelector_1=__webpack_require__(364);react_2.storiesOf("createAdaptedSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createAdaptedSelector.story.tsx",[],{},"/home/travis/build/sgrishchenko/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("example",(function(){var selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]};return{personSelector:personSelector,messageSelector:messageSelector,personAndMessageSelector:createStructuredSelector_1.createStructuredSelector({person:createAdaptedSelector_1.createAdaptedSelector(personSelector,(function(props){return{id:props.personId}})),message:createAdaptedSelector_1.createAdaptedSelector(messageSelector,(function(props){return{id:props.messageId}}))})}}),[]);return react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)}})}))}).call(this,__webpack_require__(49)(module))},711:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateCytoscapeGraph=exports.drawCytoscapeGraph=exports.createCytoElements=void 0;var cytoscape_1=__importDefault(__webpack_require__(712));cytoscape_1.default.use(__webpack_require__(716));var dagreLayout={name:"dagre",rankDir:"BT",ranker:"longest-path",nodeDimensionsIncludeLabels:!0},theme=new URL(document.location.href).searchParams.get("theme"),cytoDefaults={style:[{selector:"node",style:{"background-color":"#666",color:"dark"===theme?"#fff":"#000",label:"data(id)"}},{selector:"edge",style:{width:3,"line-color":"dark"===theme?"#444":"#ccc","target-arrow-color":"dark"===theme?"#444":"#ccc","target-arrow-shape":"triangle"}}],layout:dagreLayout};exports.createCytoElements=function(nodes,edges){var cytoNodes=Object.entries(nodes).map((function(_a){var _b=__read(_a,2),name=_b[0],node=_b[1];return{data:__assign({id:name},node)}})),cytoEdges=edges.map((function(edge,index){return{data:{id:""+index,source:edge.from,target:edge.to}}}));return __spread(cytoNodes,cytoEdges)};exports.drawCytoscapeGraph=function(cyElement){return cytoscape_1.default(__assign(__assign({},cytoDefaults),{container:cyElement}))};exports.updateCytoscapeGraph=function(cy,nodes,edges){var elements=exports.createCytoElements(nodes,edges);cy.json({elements:elements}),cy.layout(dagreLayout).run()}},829:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAdaptedSelector=void 0;var helpers_1=__webpack_require__(111),innerCreateAdaptedSelector=function(baseSelector,mapping){return function(state,props){return baseSelector(state,mapping(props))}};exports.createAdaptedSelector=function(baseSelector,mapping){var adaptedSelector=innerCreateAdaptedSelector(baseSelector,mapping);if(Object.assign(adaptedSelector,baseSelector),adaptedSelector.dependencies=[baseSelector],helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(adaptedSelector,(function(){return helpers_1.getSelectorName(baseSelector)+" ("+function(mapping){if(mapping.name)return mapping.name;var structure=mapping(new Proxy({},{get:function(target,key){return key}}));return Object.keys(structure).join()+" -> "+Object.values(structure).join()}(mapping)+")"})),helpers_1.isCachedSelector(baseSelector)){var cachedAdaptedSelector=adaptedSelector;baseSelector.getMatchingSelector&&(cachedAdaptedSelector.getMatchingSelector=innerCreateAdaptedSelector(baseSelector.getMatchingSelector,mapping)),baseSelector.removeMatchingSelector&&(cachedAdaptedSelector.removeMatchingSelector=innerCreateAdaptedSelector(baseSelector.removeMatchingSelector,mapping)),cachedAdaptedSelector.keySelector=innerCreateAdaptedSelector(baseSelector.keySelector,mapping)}return adaptedSelector}},830:function(module,exports,__webpack_require__){"use strict";(function(module){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(66).withSource,__STORY__=(__webpack_require__(66).addSource,"import React, { useMemo } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { SelectorGraph } from './SelectorGraph';\nimport { State } from '../__data__/state';\nimport { createBoundSelector } from '../createBoundSelector';\nimport { createStructuredSelector } from '../createStructuredSelector';\n\nstoriesOf('createBoundSelector', module).add('example', () => {\n  const selectors = useMemo(() => {\n    /* SELECTORS DEFINITION START */\n    const personSelector = (state: State, props: { id: number }) =>\n      state.persons[props.id];\n    const messageSelector = (state: State, props: { id: number }) =>\n      state.messages[props.id];\n\n    const marryAndHelloSelector = createStructuredSelector({\n      person: createBoundSelector(personSelector, { id: 1 }),\n      message: createBoundSelector(messageSelector, { id: 100 }),\n    });\n    /* SELECTORS DEFINITION END */\n\n    return {\n      personSelector,\n      messageSelector,\n      marryAndHelloSelector,\n    };\n  }, []);\n\n  return (\n    <SelectorGraph\n      selectors={selectors}\n      onNodeClick={(name, node) => action(name)(node)}\n    />\n  );\n});\n"),__ADDS_MAP__={"createboundselector--example":{startLoc:{col:45,line:9},endLoc:{col:1,line:36},startBody:{col:56,line:9},endBody:{col:1,line:36}}},react_1=__importStar(__webpack_require__(44)),react_2=__webpack_require__(88),addon_actions_1=__webpack_require__(110),SelectorGraph_1=__webpack_require__(147),createBoundSelector_1=__webpack_require__(365),createStructuredSelector_1=__webpack_require__(364);react_2.storiesOf("createBoundSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createBoundSelector.story.tsx",[],{},"/home/travis/build/sgrishchenko/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("example",(function(){var selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]};return{personSelector:personSelector,messageSelector:messageSelector,marryAndHelloSelector:createStructuredSelector_1.createStructuredSelector({person:createBoundSelector_1.createBoundSelector(personSelector,{id:1}),message:createBoundSelector_1.createBoundSelector(messageSelector,{id:100})})}}),[]);return react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)}})}))}).call(this,__webpack_require__(49)(module))},831:function(module,exports,__webpack_require__){"use strict";(function(module){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(66).withSource,__STORY__=(__webpack_require__(66).addSource,"import React, { useMemo, useState } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { createSelector, Selector } from 'reselect';\nimport { Message, Person, commonState, State } from '../__data__/state';\nimport { createBoundSelector } from '../createBoundSelector';\nimport { createSequenceSelector } from '../createSequenceSelector';\nimport { createChainSelector } from '../createChainSelector';\nimport { ChainSelectorGraph } from './ChainSelectorGraph';\n\nstoriesOf('createChainSelector', module)\n  .add('entity chain example', () => {\n    const [called, setCalled] = useState(false);\n\n    const selectors = useMemo(() => {\n      /* SELECTORS DEFINITION START */\n      const personSelector = (state: State, props: { id: number }) =>\n        state.persons[props.id];\n      const messageSelector = (state: State, props: { id: number }) =>\n        state.messages[props.id];\n      const documentSelector = (state: State, props: { id: number }) =>\n        state.documents[props.id];\n\n      const fullNameSelector = createSelector(\n        [personSelector],\n        ({ firstName = '', secondName = '' }) => `${firstName} ${secondName}`,\n      );\n\n      const personByDocumentIdSelector = createChainSelector(documentSelector)\n        .chain((document) =>\n          createBoundSelector(messageSelector, { id: document.messageId }),\n        )\n        .chain((message) =>\n          createBoundSelector(fullNameSelector, { id: message.personId }),\n        )\n        .build();\n      /* SELECTORS DEFINITION END */\n\n      if (called) {\n        const personByDocumentId = personByDocumentIdSelector(commonState, {\n          id: 111,\n        });\n\n        action('personByDocumentId')(personByDocumentId);\n      }\n\n      return {\n        personSelector,\n        messageSelector,\n        documentSelector,\n        fullNameSelector,\n        personByDocumentIdSelector,\n      };\n    }, [called]);\n\n    return (\n      <ChainSelectorGraph\n        selectors={selectors}\n        onCallButtonClick={() => setCalled(true)}\n      />\n    );\n  })\n  .add('aggregation example', () => {\n    const [called, setCalled] = useState(false);\n\n    const selectors = useMemo(() => {\n      /* SELECTORS DEFINITION START */\n      const personsSelector = (state: State) => state.persons;\n\n      const personSelector = (state: State, props: { id: number }) =>\n        state.persons[props.id];\n\n      const fullNameSelector = createSelector(\n        [personSelector],\n        ({ firstName = '', secondName = '' }) => `${firstName} ${secondName}`,\n      );\n\n      const longestFullNameSelector = createChainSelector(personsSelector)\n        .chain((persons) =>\n          createSequenceSelector(\n            Object.values(persons).map((person) =>\n              createBoundSelector(fullNameSelector, { id: person.id }),\n            ),\n          ),\n        )\n        .map((fullNames) =>\n          fullNames.reduce((longest, current) =>\n            current.length > longest.length ? current : longest,\n          ),\n        )\n        .build();\n      /* SELECTORS DEFINITION END */\n\n      if (called) {\n        const longestFullName = longestFullNameSelector(commonState);\n\n        action('longestFullName')(longestFullName);\n      }\n\n      return {\n        personSelector,\n        personsSelector,\n        fullNameSelector,\n        longestFullNameSelector,\n      };\n    }, [called]);\n\n    return (\n      <ChainSelectorGraph\n        selectors={selectors}\n        onCallButtonClick={() => setCalled(true)}\n      />\n    );\n  })\n  .add('switch dependency example', () => {\n    const [documentId, setDocumentId] = useState<number>();\n\n    const selectors = useMemo(() => {\n      /* SELECTORS DEFINITION START */\n      const personSelector = (state: State, props: { id: number }) =>\n        state.persons[props.id];\n      const messageSelector = (state: State, props: { id: number }) =>\n        state.messages[props.id];\n      const documentSelector = (state: State, props: { id: number }) =>\n        state.documents[props.id];\n\n      const personOrMessageByDocumentIdSelector = createChainSelector(\n        documentSelector,\n      )\n        .chain(\n          (document) =>\n            (document.messageId === 100\n              ? createBoundSelector(personSelector, { id: 1 })\n              : createBoundSelector(messageSelector, {\n                  id: document.messageId,\n                })) as Selector<State, Person | Message>,\n        )\n        .build();\n      /* SELECTORS DEFINITION END */\n\n      if (documentId !== undefined) {\n        const personOrMessageByDocumentId = personOrMessageByDocumentIdSelector(\n          commonState,\n          {\n            id: documentId,\n          },\n        );\n\n        action('personOrMessageByDocumentId')(personOrMessageByDocumentId);\n      }\n\n      return {\n        personSelector,\n        messageSelector,\n        documentSelector,\n        personOrMessageByDocumentIdSelector,\n      };\n    }, [documentId]);\n\n    return (\n      <ChainSelectorGraph\n        selectors={selectors}\n        onCallButtonClick={() => setDocumentId(documentId === 111 ? 222 : 111)}\n      />\n    );\n  });\n"),__ADDS_MAP__={"createchainselector--switch-dependency-example":{startLoc:{col:7,line:115},endLoc:{col:3,line:166},startBody:{col:36,line:115},endBody:{col:3,line:166}},"createchainselector--aggregation-example":{startLoc:{col:7,line:63},endLoc:{col:3,line:114},startBody:{col:30,line:63},endBody:{col:3,line:114}},"createchainselector--entity-chain-example":{startLoc:{col:7,line:12},endLoc:{col:3,line:62},startBody:{col:31,line:12},endBody:{col:3,line:62}}},react_1=__importStar(__webpack_require__(44)),react_2=__webpack_require__(88),addon_actions_1=__webpack_require__(110),reselect_1=__webpack_require__(87),state_1=__webpack_require__(832),createBoundSelector_1=__webpack_require__(365),createSequenceSelector_1=__webpack_require__(833),createChainSelector_1=__webpack_require__(834),ChainSelectorGraph_1=__webpack_require__(839);react_2.storiesOf("createChainSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createChainSelector.story.tsx",[],{},"/home/travis/build/sgrishchenko/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("entity chain example",(function(){var _a=__read(react_1.useState(!1),2),called=_a[0],setCalled=_a[1],selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]},documentSelector=function(state,props){return state.documents[props.id]},fullNameSelector=reselect_1.createSelector([personSelector],(function(_a){var _b=_a.firstName,firstName=void 0===_b?"":_b,_c=_a.secondName;return firstName+" "+(void 0===_c?"":_c)})),personByDocumentIdSelector=createChainSelector_1.createChainSelector(documentSelector).chain((function(document){return createBoundSelector_1.createBoundSelector(messageSelector,{id:document.messageId})})).chain((function(message){return createBoundSelector_1.createBoundSelector(fullNameSelector,{id:message.personId})})).build();if(called){var personByDocumentId=personByDocumentIdSelector(state_1.commonState,{id:111});addon_actions_1.action("personByDocumentId")(personByDocumentId)}return{personSelector:personSelector,messageSelector:messageSelector,documentSelector:documentSelector,fullNameSelector:fullNameSelector,personByDocumentIdSelector:personByDocumentIdSelector}}),[called]);return react_1.default.createElement(ChainSelectorGraph_1.ChainSelectorGraph,{selectors:selectors,onCallButtonClick:function(){return setCalled(!0)}})})).add("aggregation example",(function(){var _a=__read(react_1.useState(!1),2),called=_a[0],setCalled=_a[1],selectors=react_1.useMemo((function(){var personsSelector=function(state){return state.persons},personSelector=function(state,props){return state.persons[props.id]},fullNameSelector=reselect_1.createSelector([personSelector],(function(_a){var _b=_a.firstName,firstName=void 0===_b?"":_b,_c=_a.secondName;return firstName+" "+(void 0===_c?"":_c)})),longestFullNameSelector=createChainSelector_1.createChainSelector(personsSelector).chain((function(persons){return createSequenceSelector_1.createSequenceSelector(Object.values(persons).map((function(person){return createBoundSelector_1.createBoundSelector(fullNameSelector,{id:person.id})})))})).map((function(fullNames){return fullNames.reduce((function(longest,current){return current.length>longest.length?current:longest}))})).build();if(called){var longestFullName=longestFullNameSelector(state_1.commonState);addon_actions_1.action("longestFullName")(longestFullName)}return{personSelector:personSelector,personsSelector:personsSelector,fullNameSelector:fullNameSelector,longestFullNameSelector:longestFullNameSelector}}),[called]);return react_1.default.createElement(ChainSelectorGraph_1.ChainSelectorGraph,{selectors:selectors,onCallButtonClick:function(){return setCalled(!0)}})})).add("switch dependency example",(function(){var _a=__read(react_1.useState(),2),documentId=_a[0],setDocumentId=_a[1],selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]},documentSelector=function(state,props){return state.documents[props.id]},personOrMessageByDocumentIdSelector=createChainSelector_1.createChainSelector(documentSelector).chain((function(document){return 100===document.messageId?createBoundSelector_1.createBoundSelector(personSelector,{id:1}):createBoundSelector_1.createBoundSelector(messageSelector,{id:document.messageId})})).build();if(void 0!==documentId){var personOrMessageByDocumentId=personOrMessageByDocumentIdSelector(state_1.commonState,{id:documentId});addon_actions_1.action("personOrMessageByDocumentId")(personOrMessageByDocumentId)}return{personSelector:personSelector,messageSelector:messageSelector,documentSelector:documentSelector,personOrMessageByDocumentIdSelector:personOrMessageByDocumentIdSelector}}),[documentId]);return react_1.default.createElement(ChainSelectorGraph_1.ChainSelectorGraph,{selectors:selectors,onCallButtonClick:function(){return setDocumentId(111===documentId?222:111)}})}))}).call(this,__webpack_require__(49)(module))},832:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.commonState=void 0,exports.commonState={persons:{1:{id:1,firstName:"Marry",secondName:"Poppins"},2:{id:2,firstName:"Harry",secondName:"Potter"}},messages:{100:{id:100,personId:1,date:new Date("2018-12-29"),text:"Hello"},200:{id:200,personId:2,date:new Date("2018-12-30"),text:"Buy"}},documents:{111:{id:111,messageId:100,data:[1,2,3]},222:{id:222,messageId:200,data:[4,5,6]}}}},833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSequenceSelector=void 0;var reselect_1=__webpack_require__(87);exports.createSequenceSelector=function createSequenceSelector(selectors,selectorCreator){return void 0===selectorCreator&&(selectorCreator=reselect_1.createSelector),selectorCreator(selectors,(function(){for(var results=[],_i=0;_i<arguments.length;_i++)results[_i]=arguments[_i];return results}))}},834:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChainSelector=exports.SelectorMonad=void 0;var re_reselect_1=__importDefault(__webpack_require__(835)),helpers_1=__webpack_require__(111),composingKeySelectorCreator_1=__webpack_require__(836),sumString=function(source){for(var stringSource=String(source),result=0,i=stringSource.length-1;i>=0;i-=1){result+=stringSource[i].charCodeAt(0)}return result},SelectorMonad=function(){function SelectorMonad(selector,options,prevChain){void 0===options&&(options={}),this.selector=selector,this.options=options,this.prevChain=prevChain}return SelectorMonad.prototype.chain=function(fn,inputOptions){var _this=this,options=__assign(__assign({},this.options),inputOptions),keySelector=helpers_1.isCachedSelector(this.selector)?this.selector.keySelector:helpers_1.defaultKeySelector,_a=options.cacheObjectCreator,cacheObjectCreator=void 0===_a?function(){}:_a,higherOrderSelector=re_reselect_1.default(this.selector,fn)({keySelector:keySelector,cacheObject:cacheObjectCreator()});helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(higherOrderSelector,(function(){return"higher order for "+helpers_1.getSelectorName(_this.selector)+" ("+sumString(fn)+")"}));var combinedSelector=function(state,props){var derivedSelector=higherOrderSelector(state,props);return combinedSelector.dependencies=[higherOrderSelector,derivedSelector],helpers_1.isDebugMode()&&(helpers_1.getSelectorName(derivedSelector)||helpers_1.defineDynamicSelectorName(derivedSelector,(function(){return"derived from "+helpers_1.getSelectorName(_this.selector)+" ("+function(selector){for(var _a,dependencies=null!==(_a=selector.dependencies)&&void 0!==_a?_a:[],result=sumString(selector),i=dependencies.length-1;i>=0;i-=1){var dependency=dependencies[i];result+=sumString(dependency)}return result}(derivedSelector)+")"})),helpers_1.defineDynamicSelectorName(combinedSelector,(function(){return helpers_1.getSelectorName(_this.selector)+" (chained by "+helpers_1.getSelectorName(derivedSelector)+")"}))),derivedSelector(state,props)};combinedSelector.dependencies=[higherOrderSelector],combinedSelector.cache=higherOrderSelector.cache;var higherOrderKeySelector=re_reselect_1.default(higherOrderSelector,(function(derivedSelector){return composingKeySelectorCreator_1.composingKeySelectorCreator({inputSelectors:[higherOrderSelector,derivedSelector]})}))({keySelector:keySelector,cacheObject:cacheObjectCreator()});combinedSelector.keySelector=function(state,props){return higherOrderKeySelector(state,props)(state,props)},helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(combinedSelector,(function(){return helpers_1.getSelectorName(_this.selector)+" (will be chained "+sumString(fn)+")"}));var prevChain=Object.assign(fn,{parentChain:this.prevChain});return new SelectorMonad(combinedSelector,options,prevChain)},SelectorMonad.prototype.map=function(fn,options){var _this=this;return this.chain((function(result){var output=fn(result),selector=function(){return output};return helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(selector,(function(){return"mapped from "+helpers_1.getSelectorName(_this.selector)+" ("+sumString(fn)+")"})),selector}),options)},SelectorMonad.prototype.build=function(){return Object.assign(this.selector,{chainHierarchy:this.prevChain})},SelectorMonad}();exports.SelectorMonad=SelectorMonad,exports.createChainSelector=function createChainSelector(selector,options){return new SelectorMonad(selector,options)}},836:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.composingKeySelectorCreator=void 0;var createPropSelector_1=__webpack_require__(837),helpers_1=__webpack_require__(111),composeKeySelectors_1=__webpack_require__(838),flatKeySelectors=function(keySelectors){for(var result=[],i=0;i<keySelectors.length;i+=1){var keySelector=keySelectors[i];"dependencies"in keySelector&&composeKeySelectors_1.isComposedKeySelector(keySelector)?result.push.apply(result,__spread(flatKeySelectors(keySelector.dependencies))):result.push(keySelector)}return result},uniqKeySelectors=function(keySelectors){for(var result=[],_loop_1=function(i){var keySelector=keySelectors[i];result.some((function(resultKeySelector){return function(selector,another){if(selector===another)return!0;if(createPropSelector_1.isPropSelector(selector)&&createPropSelector_1.isPropSelector(another)){var selectorPath=selector.path,anotherPath=another.path;if(selectorPath.length!==anotherPath.length)return!1;for(var i=0;i<selectorPath.length;i+=1)if(selectorPath[i]!==anotherPath[i])return!1;return!0}return!1}(keySelector,resultKeySelector)}))||result.push(keySelector)},i=0;i<keySelectors.length;i+=1)_loop_1(i);return result};exports.composingKeySelectorCreator=function composingKeySelectorCreator(_a){var inputSelectors=_a.inputSelectors,keySelector=_a.keySelector,keySelectors=[];return keySelector&&keySelectors.push(keySelector),inputSelectors.forEach((function(selector){helpers_1.isCachedSelector(selector)&&keySelectors.push(selector.keySelector)})),keySelectors=flatKeySelectors(keySelectors),0===(keySelectors=uniqKeySelectors(keySelectors)).length?helpers_1.defaultKeySelector:1===keySelectors.length?__read(keySelectors,1)[0]:composeKeySelectors_1.composeKeySelectors.apply(void 0,__spread(keySelectors))}},837:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPropSelector=exports.isPropSelector=void 0;var createPathSelector_1=__webpack_require__(366),propSelectorSymbol=Symbol.for("PropSelector");exports.isPropSelector=function(selector){return selector instanceof Object&&propSelectorSymbol in selector},exports.createPropSelector=function createPropSelector(){return createPathSelector_1.innerCreatePathSelector((function(state,props){return props}),[],(function(selector){Object.defineProperty(selector,propSelectorSymbol,{value:!0})}))}},838:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.composeKeySelectors=exports.isComposedKeySelector=void 0;var composedKeySelectorSymbol=Symbol.for("ComposedKeySelector");exports.isComposedKeySelector=function(selector){return selector instanceof Object&&composedKeySelectorSymbol in selector},exports.composeKeySelectors=function composeKeySelectors(){for(var keySelectors=[],_i=0;_i<arguments.length;_i++)keySelectors[_i]=arguments[_i];var resultSelector=function(state,props){for(var key=keySelectors[0](state,props),i=1;i<keySelectors.length;i+=1)key+=":",key+=keySelectors[i](state,props);return key};return resultSelector.dependencies=keySelectors,Object.defineProperty(resultSelector,composedKeySelectorSymbol,{value:!0}),resultSelector}},839:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChainSelectorGraph=void 0;var react_1=__importDefault(__webpack_require__(44)),addon_actions_1=__webpack_require__(110),SelectorGraph_1=__webpack_require__(147);exports.ChainSelectorGraph=function(_a){var selectors=_a.selectors,onCallButtonClick=_a.onCallButtonClick;return react_1.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},react_1.default.createElement("div",null,react_1.default.createElement("button",{type:"button",onClick:onCallButtonClick},"Call Chain Selector")),react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)},style:{height:void 0,flexGrow:1}}))}},840:function(module,exports,__webpack_require__){"use strict";(function(module){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(66).withSource,__STORY__=(__webpack_require__(66).addSource,"import React, { useMemo } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { createSelector } from 'reselect';\nimport { SelectorGraph } from './SelectorGraph';\nimport { State } from '../__data__/state';\nimport { createPathSelector } from '../createPathSelector';\n\nstoriesOf('createPathSelector', module).add('example', () => {\n  const selectors = useMemo(() => {\n    /* SELECTORS DEFINITION START */\n    const personSelector = (state: State, props: { personId: number }) =>\n      state.persons[props.personId];\n\n    const personFullNameSelector = createSelector(\n      createPathSelector(personSelector).firstName(''),\n      createPathSelector(personSelector).secondName(''),\n      (firstName, secondName) => `${firstName} ${secondName}`,\n    );\n\n    const personShortNameSelector = createSelector(\n      createPathSelector(personSelector).firstName(''),\n      createPathSelector(personSelector).secondName(''),\n      (firstName, secondName) => {\n        const [firstLetter] = Array.from(secondName);\n        return `${firstName} ${firstLetter}.`;\n      },\n    );\n    /* SELECTORS DEFINITION END */\n\n    return {\n      personSelector,\n      personFullNameSelector,\n      personShortNameSelector,\n    };\n  }, []);\n\n  return (\n    <SelectorGraph\n      selectors={selectors}\n      onNodeClick={(name, node) => action(name)(node)}\n    />\n  );\n});\n"),__ADDS_MAP__={"createpathselector--example":{startLoc:{col:44,line:9},endLoc:{col:1,line:44},startBody:{col:55,line:9},endBody:{col:1,line:44}}},react_1=__importStar(__webpack_require__(44)),react_2=__webpack_require__(88),addon_actions_1=__webpack_require__(110),reselect_1=__webpack_require__(87),SelectorGraph_1=__webpack_require__(147),createPathSelector_1=__webpack_require__(366);react_2.storiesOf("createPathSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createPathSelector.story.tsx",[],{},"/home/travis/build/sgrishchenko/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("example",(function(){var selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.personId]};return{personSelector:personSelector,personFullNameSelector:reselect_1.createSelector(createPathSelector_1.createPathSelector(personSelector).firstName(""),createPathSelector_1.createPathSelector(personSelector).secondName(""),(function(firstName,secondName){return firstName+" "+secondName})),personShortNameSelector:reselect_1.createSelector(createPathSelector_1.createPathSelector(personSelector).firstName(""),createPathSelector_1.createPathSelector(personSelector).secondName(""),(function(firstName,secondName){return firstName+" "+__read(Array.from(secondName),1)[0]+"."}))}}),[]);return react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)}})}))}).call(this,__webpack_require__(49)(module))}},[[367,1,2]]]);
//# sourceMappingURL=main.03ecfaaf8dd0481a75e0.bundle.js.map